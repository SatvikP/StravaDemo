<!DOCTYPE html>
<html>
<head>
    <title>My Strava Activities</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .login-btn { 
            background: #FC4C02; color: white; padding: 12px 24px; 
            text-decoration: none; border-radius: 4px; display: inline-block;
        }
        .activity { 
            border: 1px solid #ddd; padding: 15px; margin: 10px 0; 
            border-radius: 4px; 
        }
    </style>
</head>
<body>
    <h1>My Strava Activities</h1>
    
    <div id="login-section">
        <p>Connect your Strava account to see your recent activities:</p>
        <a href="#" id="login-btn" class="login-btn">Connect with Strava</a>
    </div>
    
    <div id="activities-section" style="display: none;">
        <h2>Your Recent Activities</h2>
        <div id="activities-list"></div>
        <button onclick="logout()">Logout</button>
    </div>

    <div id="activities-section" style="display: none;">
        <h2>Your Network's 10K Leaderboard</h2>
        <div id="activities-list"></div>
        <button onclick="logout()">Logout</button>
    </div>

    <div id="leaderboard" style="display: none;">
        <h2>Leaderboard</h2>
        <div id="leaderboard-content"></div>
    </div>

    <script src="strava-app.js"></script>

    <script>
    function renderLeaderboard(leaderboard) {
        const container = document.getElementById('leaderboard-content');
        container.innerHTML = leaderboard.map((entry, i) =>
            `<div>${i + 1}. ${entry.name}: ${formatTime(entry.time)}</div>`
        ).join('');
    }

    async function fetchPublicActivities(athleteId, accessToken) {
        const url = `https://www.strava.com/api/v3/athletes/${athleteId}/activities?per_page=200`;
        const response = await fetch(url, {
            headers: { Authorization: `Bearer ${accessToken}` }
        });

        if (!response.ok) {
            // If activities are not public, you may get a 403 or an empty array
            return [];
        }

        const activities = await response.json();
        // Optionally, double-check the visibility field (if present)
        // Some Strava API responses include a 'visibility' or 'private' field
        return activities.filter(act => !act.private); // Only include public activities
    }
    </script>
</body>
</html>